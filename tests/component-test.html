<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Componentes - HortiPerto</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/hortiperto-styles.css">
</head>
<body class="bg-gray-100">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold text-center mb-8">üß™ Teste de Componentes - HortiPerto</h1>
        
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4">üîß Teste de Componentes</h2>
            
            <div class="space-y-4">
                <button onclick="executeComponentTests()" class="btn btn-primary w-full">
                    Executar Todos os Testes de Componente
                </button>
                
                <button onclick="clearComponentResults()" class="btn btn-secondary w-full">
                    Limpar Resultados
                </button>
            </div>
            
            <div id="component-test-results" class="mt-4 p-4 bg-gray-50 rounded-lg hidden">
                <h3 class="font-semibold mb-2">Resultados dos Testes:</h3>
                <div id="component-results"></div>
            </div>
        </div>
    </div>

    <!-- Elementos HTML necess√°rios para os testes -->
    <div id="login-modal" style="display:none;">
        <form id="login-form">
            <input type="email" id="login-email">
            <input type="password" id="login-password">
            <select id="login-type">
                <option value="consumer">Consumidor</option>
                <option value="seller">Vendedor</option>
                <option value="delivery">Entregador</option>
            </select>
        </form>
    </div>

    <div id="cart-count">0</div>

    <div id="products-catalog"></div>
    <button data-category="all">Todos</button>
    <button data-category="vegetables">Legumes</button>

    <form id="seller-form">
        <div class="form-step active" data-step="1">
            <input type="text" id="seller-name">
            <input type="text" id="seller-doc">
            <input type="email" id="seller-email">
            <input type="text" id="seller-cep">
        </div>
    </form>

    <input type="file" id="seller-sanitary">

    <!-- Incluir os scripts necess√°rios -->
    <script src="../js/hortiperto-main.js"></script>
    <script src="../js/shopping-assistant.js"></script>
    
    <script>
        // Fun√ß√£o para exibir resultados dos testes
        function testar(nome, teste) {
            try {
                teste();
                const results = document.getElementById('component-results');
                results.innerHTML += `<div class="text-green-600 mb-2">‚úÖ ${nome}</div>`;
                console.log(`‚úÖ ${nome} - PASSOU`);
            } catch (erro) {
                const results = document.getElementById('component-results');
                results.innerHTML += `<div class="text-red-600 mb-2">‚ùå ${nome}: ${erro.message}</div>`;
                console.log(`‚ùå ${nome} - FALHOU: ${erro.message}`);
            }
        }

        // Testes de componente
        function runComponentTests() {
            console.log('Iniciando testes de componente...');
            
            // Teste 1: Verificar se o modal de login est√° presente
            testar("COMPONENT - Modal de login deve estar presente na p√°gina", () => {
                const loginModal = document.getElementById("login-modal");
                if (!loginModal) throw new Error("Modal de login n√£o encontrado");
                
                const loginForm = document.getElementById("login-form");
                if (!loginForm) throw new Error("Formul√°rio de login n√£o encontrado");
            });

            // Teste 2: Verificar se os campos do formul√°rio de login funcionam
            testar("COMPONENT - Campos do formul√°rio de login devem receber valores", () => {
                const emailInput = document.getElementById("login-email");
                const passwordInput = document.getElementById("login-password");
                const typeSelect = document.getElementById("login-type");

                if (!emailInput || !passwordInput || !typeSelect) {
                    throw new Error("Campos do formul√°rio de login n√£o encontrados");
                }

                emailInput.value = "teste@exemplo.com";
                passwordInput.value = "senha123";
                typeSelect.value = "consumer";

                if (emailInput.value !== "teste@exemplo.com" || 
                    passwordInput.value !== "senha123" || 
                    typeSelect.value !== "consumer") {
                    throw new Error("Campos do formul√°rio n√£o aceitaram valores corretamente");
                }
            });

            // Teste 3: Verificar se o carrinho est√° presente e funcional
            testar("COMPONENT - Carrinho de compras deve estar presente", () => {
                const cartCount = document.getElementById("cart-count");
                if (!cartCount) throw new Error("Contador do carrinho n√£o encontrado");
                
                // Verificar se o contador inicia com 0
                if (cartCount.textContent !== "0") {
                    throw new Error("Contador do carrinho n√£o inicia com 0");
                }
            });

            // Teste 4: Verificar se o cat√°logo de produtos est√° presente
            testar("COMPONENT - Cat√°logo de produtos deve estar presente", () => {
                const productsCatalog = document.getElementById("products-catalog");
                if (!productsCatalog) throw new Error("Cat√°logo de produtos n√£o encontrado");
                
                const filterButtons = document.querySelectorAll('[data-category]');
                if (filterButtons.length === 0) throw new Error("Bot√µes de filtro n√£o encontrados");
            });

            // Teste 5: Verificar se o formul√°rio de vendedor est√° presente
            testar("COMPONENT - Formul√°rio de cadastro de vendedor deve estar presente", () => {
                const sellerForm = document.getElementById("seller-form");
                if (!sellerForm) throw new Error("Formul√°rio de vendedor n√£o encontrado");
                
                const formSteps = document.querySelectorAll('.form-step');
                if (formSteps.length === 0) throw new Error("Passos do formul√°rio n√£o encontrados");
            });

            // Teste 6: Verificar se os campos do formul√°rio de vendedor funcionam
            testar("COMPONENT - Campos do formul√°rio de vendedor devem receber valores", () => {
                const nameInput = document.getElementById("seller-name");
                const docInput = document.getElementById("seller-doc");
                const emailInput = document.getElementById("seller-email");

                if (!nameInput || !docInput || !emailInput) {
                    throw new Error("Campos do formul√°rio de vendedor n√£o encontrados");
                }

                nameInput.value = "Jo√£o Silva";
                docInput.value = "123.456.789-00";
                emailInput.value = "joao@exemplo.com";

                if (nameInput.value !== "Jo√£o Silva" || 
                    docInput.value !== "123.456.789-00" || 
                    emailInput.value !== "joao@exemplo.com") {
                    throw new Error("Campos do formul√°rio de vendedor n√£o aceitaram valores");
                }
            });

            // Teste 7: Verificar se o sistema de upload de arquivos est√° presente
            testar("COMPONENT - Sistema de upload de arquivos deve estar presente", () => {
                const fileInputs = document.querySelectorAll('input[type="file"]');
                if (fileInputs.length === 0) throw new Error("Nenhum campo de upload encontrado");
            });

            // Teste 8: Verificar se o sistema de filtros de produtos funciona
            testar("COMPONENT - Sistema de filtros de produtos deve estar presente", () => {
                const filterButtons = document.querySelectorAll('[data-category]');
                if (filterButtons.length === 0) throw new Error("Bot√µes de filtro n√£o encontrados");
            });

            // Teste 9: Verificar se a valida√ß√£o de CEP est√° presente
            testar("COMPONENT - Valida√ß√£o de CEP deve estar presente", () => {
                const cepInput = document.getElementById("seller-cep");
                if (!cepInput) throw new Error("Campo de CEP n√£o encontrado");
            });

            // Teste 10: Verificar se a valida√ß√£o de CPF/CNPJ est√° presente
            testar("COMPONENT - Valida√ß√£o de CPF/CNPJ deve estar presente", () => {
                const docInput = document.getElementById("seller-doc");
                if (!docInput) throw new Error("Campo de documento n√£o encontrado");
            });

            console.log('Testes de componente conclu√≠dos!');
        }

        // Fun√ß√£o para executar todos os testes
        function executeComponentTests() {
            const results = document.getElementById('component-results');
            results.innerHTML = '';
            document.getElementById('component-test-results').classList.remove('hidden');
            
            runComponentTests();
        }

        // Fun√ß√£o para limpar resultados
        function clearComponentResults() {
            const results = document.getElementById('component-results');
            results.innerHTML = '';
            document.getElementById('component-test-results').classList.add('hidden');
        }

        // Executar testes automaticamente quando a p√°gina carregar
        window.addEventListener('load', function() {
            console.log('P√°gina carregada, executando testes de componente...');
            setTimeout(() => {
                executeComponentTests();
            }, 1000); // Aguardar 1 segundo para garantir que todos os scripts carregaram
        });
    </script>
</body>
</html> 